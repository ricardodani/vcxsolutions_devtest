{% extends "tarifas/base.html" %}

{% block content %}
<div class="header clearfix">
    <small class="float-right">
        Autor: <strong>Ricardo Dani</strong>
    </small>
    <h3 class="text-muted">Simulador de Planos</h3>
    <i>Simule o melhor plano de telefonia de acordo com seu consumo</i>
</div>

<nav class="navbar navbar-light bg-light">
    <form action="/" method="GET">
    <div class="row">
        <div class="col">
            <label for="min_minutes">Ligações (min)</label>
            <input name="min_minutes" value="{{ params.min_minutes }}" class="form-control form-control-sm" type="number" placeholder="Consumo em min">
        </div>
        <div class="col">
            <label for="min_mb">Dados (MB)</label>
            <input name="min_mb" value="{{ params.min_mb }}" class="form-control form-control-sm" type="number" placeholder="Consumo em MB">
        </div>
        <div class="col">
            <label for="min_sms">SMS's</label>
            <input name="min_sms" value="{{ params.min_sms }}" class="form-control form-control-sm" type="number" placeholder="Consumo total">
        </div>
        <p class="float-right">
            <br />
            <button class="btn btn-primary" type="submit">Pesquisar</button>
        </p>
    </div>
    </form>
</nav>

<hr />

{% if not data.cheapest_plan %}
<div class="alert alert-danger" role="alert">
Não há um plano que atenda suas demandas!
</div>

{% else %}
<div class="alert alert-success" role="alert">
    Encontrado plano para um <strong>consumo mínimo</strong>
    <i>
    {% if params.min_minutes %}{% spaceless %}
    de {{ params.min_minutes }} mins,
    {% endspaceless %}{% endif %}
    {% if params.min_mb %}{% spaceless %}
    de {{ params.min_mb }} MB,
    {% endspaceless %}{% endif %}
    {% if params.min_sms %}{% spaceless %}
    de {{ params.min_sms }} SMS
    </i>
    {% endspaceless %}{% endif %}
</div>

<table class="table table-plano">
    <thead class="thead-default">
        <tr>
            <th>Plano</th>
            <th>Minutos</th>
            <th>Dados</th>
            <th>SMS</th>
            <th>Valor</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th scope="row" nowrap>{{ data.cheapest_plan }}</th>
            <td>{{ data.cheapest_plan.minutes_franchise }} min</td>
            <td>{{ data.cheapest_plan.data_display }}</td>
            <td>{{ data.cheapest_plan.sms_pack }}</td>
            <td>R$ {{ data.cheapest_plan.value }}</td>
        </tr>
        {% comment %}
        <tr>
            <th scope="row" nowrap>+ Dados</th>
            <td>-</td>
            <td>10 GB</td>
            <td>-</td>
            <td>R$ 18,00</td>
        </tr>
        <tr>
            <th scope="row" nowrap>+ SMS</th>
            <td>-</td>
            <td>-</td>
            <td>10 SMS</td>
            <td>R$ 20,00</td>
        </tr>
        <tr>
            <th scope="row">Total</th>
            <td>100 min</td>
            <td>20 GB</td>
            <td>110 SMS</td>
            <td><strong>R$ 38,00</strong></td>
        </tr>
        {% endcomment %}
    </tbody>
</table>
{% if data.filtered_plans %}

{% endif %}
{% endif %}
{% endblock content %}
